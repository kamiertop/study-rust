macro_rules! add {
    // å®æ²¡æœ‰å¯¹ä¸¤ä¸ªæ•°æ‰§è¡Œç›¸åŠ æ“ä½œï¼Œå®ƒåªæ˜¯æŠŠè‡ªå·±æ›¿æ¢ä¸ºæŠŠä¸¤ä¸ªæ•°ç›¸åŠ çš„ä»£ç 
    ($a:expr,$b:expr)=>{
        {
            $a+$b
        }
    };
    // ç¬¬äºŒä¸ªåˆ†æ”¯,å¯ä»¥æ¥æ”¶ä¸€ä¸ªå‚æ•°
    ($a:expr)=>{
        {
            println!("{}",$a);
            $a
        }
    }
}

macro_rules! add_as {
    // åšä¸€ä¸ªç±»å‹è½¬æ¢
    ($a:expr,$b:expr,$typ:ty)=>{
        $a as $typ + $b as $typ
    }
}

// å£°æ˜å¼å®
macro_rules! hashmap {
    // expander   => {transcriber}
    // å®æ‰©å±•è¯­æ³•å®šä¹‰  å®æ‰©å±•çš„è½¬æ¢æœºåˆ¶
    // è¯­æ³•å®šä¹‰çš„æ ‡è¯†ç¬¦ä»¥$å¼€å¤´,ç±»å‹æ”¯æŒitem, block,  stmt, pat, expr, ty, itent, path, tt
    // æ”¯æŒé‡å¤å¤šä¸ªè¿™æ ·çš„è¯­æ³•å…ƒç´ , ä½¿ç”¨+æ¨¡å¼å’Œ*æ¨¡å¼æ¥å®Œæˆ,+ä»£è¡¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªé‡å¤,*ä»£è¡¨é›¶ä¸ªæˆ–è€…å¤šä¸ªé‡å¤
    // ä¸‹é¢çš„ " , "æ˜¯åˆ†éš”ç¬¦,ç”¨äºåˆ†å‰²å¤šä¸ªå‚æ•°
    ($($key: expr => $val: expr),+) => {
        {
        let mut map = std::collections::HashMap::new();
        // åœ¨è¯­æ³•æ‰©å±•çš„éƒ¨åˆ†ä¹Ÿæ˜¯ç”¨*ç¬¦å·, å°†è¾“å…¥éƒ¨åˆ†æ‰©å±•ä¸ºå¤šæ¡insertè¯­å¥
        $(
            map.insert($key,$val);
        )+
        map
        }
    };
}
fn main() {
	println!("ğŸ˜²Rustçš„å®åœ¨è¯­æ³•è§£æä¹‹åèµ·ä½œç”¨, å¯ä»¥è·å–æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯, è€Œä¸”æ›´åŠ å®‰å…¨");
	println!("ğŸ˜²å®çš„å†…éƒ¨å®ç°å’Œå¤–éƒ¨è°ƒç”¨å¤„äºä¸åŒåå­—ç©ºé—´,å®ƒçš„è®¿é—®èŒƒå›´ä¸¥æ ¼å—é™");
	println!("ğŸ˜²æ˜¯ä¸€ç§ç”Ÿæˆç¨‹åºçš„ç¨‹åº, åˆ†ä¸ºå£°æ˜å¼å®å’Œè¿‡ç¨‹å®");
	println!("ğŸ˜®å®ç°ç¼–è¯‘é˜¶æ®µæ£€æŸ¥,ä¾‹å¦‚ä»¥ä¸‹ä»£ç ");
	println!("ğŸ˜®ä»¥ä¸‹ä»£ç  æ‰“å°å‡ºå½“å‰æºä»£ç çš„æ–‡ä»¶å,ä»¥åŠå½“å‰ä»£ç çš„è¡Œæ•°,éƒ½æ˜¯çº¯ç¼–è¯‘é˜¶æ®µçš„ä¿¡æ¯");
	println!("file: {}, line: {}", file!(), line!());
	println!("ğŸ˜®å®å¯ä»¥å®ç°è‡ªåŠ¨ä»£ç ç”Ÿæˆ");
	println!("ğŸ˜®å®å¯ä»¥å®ç°è¯­æ³•æ‰©å±•");
	let counts = hashmap!("A"=>0,"B"=>0);
	println!("{:?}", counts);
	println!("è¿‡ç¨‹å®åˆæ¢");
	add!(1,2);
	add!(1);
	println!("{:?}", add_as!(1,2,i32));
	println!("ğŸ˜‰æ„Ÿè°¢è¿™ä¸ªé“¾æ¥: https://zhuanlan.zhihu.com/p/353421021");
	println!("ğŸ˜‰è¿™ä¸ªå°å†Œå¾ˆå‰å®³: https://zjp-cn.github.io/tlborm/");
	println!("ğŸ˜‰è¿™ä¸ªä»¥åå¯ä»¥å‚è€ƒ{:?}", "https://rustwiki.org/zh-CN/reference/macros-by-example.html");
}


/*
- é€šè¿‡æ ‡å‡†åº“æä¾›çš„macro_rules!å®ç°
- é€šè¿‡æä¾›ç¼–è¯‘å™¨æ‰©å±•æ¥å®ç°
- + ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªé‡å¤, *ä»£è¡¨é›¶ä¸ªæˆ–è€…å¤šä¸ªé‡å¤
*/

/*
item  : ä¸€ä¸ªé¡¹ï¼ˆitemï¼‰ï¼Œåƒä¸€ä¸ªå‡½æ•°ï¼Œç»“æ„ä½“ï¼Œæ¨¡å—ç­‰ã€‚
block : ä¸€ä¸ªå— ï¼ˆblockï¼‰ï¼ˆå³ä¸€ä¸ªè¯­å¥å—æˆ–ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç”±èŠ±æ‹¬å·æ‰€åŒ…å›´ï¼‰
stmt  : ä¸€ä¸ªè¯­å¥ï¼ˆstatementï¼‰
pat   : ä¸€ä¸ªæ¨¡å¼ï¼ˆpatternï¼‰
expr  : ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆexpressionï¼‰
ty    : ä¸€ä¸ªç±»å‹ï¼ˆtypeï¼‰
ident : ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆindentfierï¼‰
path  : ä¸€ä¸ªè·¯å¾„ï¼ˆpathï¼‰ï¼ˆä¾‹å¦‚ï¼Œfooï¼Œ::std::mem::replaceï¼Œtransmute::<_, int>ï¼Œ...ï¼‰
meta  : ä¸€ä¸ªå…ƒæ•°æ®é¡¹ï¼›ä½äº#[...]å’Œ#![...]å±æ€§
tt    : ä¸€ä¸ªè¯æ³•æ ‘
vis   : ä¸€ä¸ªå¯èƒ½ä¸ºç©ºçš„Visibilityé™å®šè¯
*/
