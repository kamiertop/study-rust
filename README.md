[生命周期](https://www.bilibili.com/video/BV1az4y1e7jA/)

# 借用

- 变量对其管理的内存拥有所有权. 所有权可以被转移, 也可以被借用.
- 借用指针(& &mut)也可以称作"引用"
- 借用指针与普通指针的内部数据结构是一模一样的, 唯一的区别是语义层面上的. 作用是告诉编译器, 对指向的这块内存区域没有所有权.
- 借用指针在编译后就是一个普通的指针, 它的意义只能在编译阶段的静态检查中体现.

# 借用规则

- 借用指针不能比它指向的变量存在的时间更长
- &mut型借用指针只能指向本身具有mut修饰的变量
- &mut型借用指针存在的时候, 被借用的变量本身会处于冻结状态
- 如果只有&型借用指针, 能同时存在多个
- 如果存在&mut型借用指针, 只能存在一个
- 借用指针只能临时地拥有对这个变量读或写的权限. 借用指针的生命周期绝对不能大于它所引用的原来变量的生命周期
- 生命周期之间有包含关系
	- 'a:'b  'a至少不会比'b短
	- 如果&'a是合法的, 那么'b作为b的一部分, &'b也一定是合法的
	- 任何一生命周期'a都满足'static:'a
- Rust的引用类型是支持"协变"的.编译器眼里, 生命周期就是一个区间, 生命周期参数就是一个普通的泛型参数, 可以被特华为某个具体的生命周期

# 类型的生命周期标记

- 如果自定义类型中有成员包含生命周期参数, 那么这个类型也必须包含生命周期参数
- 省略生命周期的自动补全规则
	- 每个带生命周期参数的输入参数, 每个对应不同的生命周期参数
	- 如果只有一个输入参数带生命周期参数, 那么返回值的生命周期被指定为这个参数
	- 如果有多个输入参数带生命周期参数, 但其中有&self, &mut self, 那么返回值的生命周期被指定为这个参数